[Rainmeter]
Update=500
AccurateText=1
SkinHeight=#Size#
SkinWidth=#Size#
OnRefreshAction=[!SetVariable Alpha "0"][!SetVariable YPos "100"]#DynamicVariablesActions#

[Variables]
@includeVariables=#@#variables.ini
@includePlayer=#@#Players\#Player#.inc
Alpha=0
YPos=100
AnimationTime=20
HasRepOne=0
IconColour=0,0,0
DynamicVariablesActions=[!SetOption GradientOverlay DynamicVariables "0"][!SetOption ControlBar DynamicVariables "0"][!SetOption PlayPauseFill DynamicVariables "0"][!SetOption PlayShape DynamicVariables "0"][!SetOption PauseShape DynamicVariables "0"][!SetOption Previous DynamicVariables "0"][!SetOption Next DynamicVariables "0"][!SetOption DisplayRepeat DynamicVariables "0"][!SetOption DisplayShuffle DynamicVariables "0"]

[DarkMode]
Measure=Calc
Formula=#DarkMode#
IfCondition=DarkMode=1
IfTrueAction=[!SetOption Border Fill "Fill Color 34,35,38"][!SetOption ControlBar Fill "Fill Color 34,35,38"][!SetVariable IconColour "255,255,255"]

[ShuffleCalc]
Measure=Calc
Formula=Shuffle
IfCondition=ShuffleCalc>0
IfTrueAction=[!SetOption DisplayShuffle InlineSetting2 "Color | [*P500*]"]
IfFalseAction=[!SetOption DisplayShuffle InlineSetting2 "Color | #*IconColour*#"]

[PlayerCheck]
Measure=String
String=#Player#
IfMatch=GPMDP|Web
IfMatchAction=[!SetVariable HasRepOne "1"]

[RepeatCalc]
Measure=Calc
Formula=Repeat
IfCondition=RepeatCalc>0
IfTrueAction=[!SetOption DisplayRepeat InlineSetting2 "Color | [*P500*]"]
IfFalseAction=[!SetOption DisplayRepeat InlineSetting2 "Color | #*IconColour*#"]
IfCondition2=(Repeat=1) && (#HasRepOne#=1)
IfTrueAction2=[!SetOption DisplayRepeat Text "repeat_one"]
IfFalseAction2=[!SetOption DisplayRepeat Text "repeat"]
DynamicVariables=1

[Alpha]
Measure=Calc
Formula=#Alpha#

[YPos]
Measure=Calc
Formula=#YPos#

[MouseoverTimer]
Measure=Plugin
Plugin=ActionTimer
ActionList1=Show | Wait #AnimationTime# | Repeat Show, #AnimationTime#, 9 | SetVar
Show=#DynamicVariablesActions#[!SetOption Alpha Formula "Clamp(Alpha+10,0,100)"][!SetOption YPos Formula "Clamp(YPos-10,0,100)"][!Update]
SetVar=[!SetVariable Alpha "100"][!SetVariable YPos "0"]
ActionList2=Hide | Wait #AnimationTime# | Repeat Hide, #AnimationTime#, 9 | SetVar2
Hide=#DynamicVariablesActions#[!SetOption Alpha Formula "Clamp(Alpha-10,0,100)"][!SetOption YPos Formula "Clamp(YPos+10,0,100)"][!Update]
SetVar2=[!SetVariable Alpha "0"][!SetVariable YPos "100"]

[Background]
Meter=Shape
Shape=Rectangle 6,6,(#Size#-12),(#Size#-12) | StrokeWidth 0 | Fill Color 216,216,216

[Disc]
Meter=String
Text=album
InlineSetting=Face | Material Icons
InlineSetting2=Color | 158,158,158
InlineSetting3=Size | (Round(#Size#*0.5))
X=(Round(#Size#*0.5))
Y=(Round(#Size#*0.5))
StringAlign=CenterCenter
AntiAlias=1

[CoverDisplay]
Meter=Image
MeasureName=Cover
X=6
Y=6
W=(#Size#-12)
H=(#Size#-12)
PreserveAspectRatio=2
MouseOverAction=[!CommandMeasure MouseoverTimer "Execute 1"]
MouseLeaveAction=[!CommandMeasure MouseoverTimer "Execute 2"]

[GradientOverlay]
Meter=Shape
Shape=Rectangle 6,6,(#Size#-12),(Round(#Size#*0.3)) | StrokeWidth 0 | Fill LinearGradient Overlay
Overlay=270 | 0,0,0,(125*([Alpha]/100)) ; 0.0 | 0,0,0,(125*([Alpha]/100)) ; 0.75 | 0,0,0,0 ; 1.0

[TrackDisplay]
Meter=String
MeasureName=Track
X=18
Y=10
W=(#Size#-24)
ClipString=2
InlineSetting=Face | #Font#
InlineSetting2=Color | 255,255,255,(229*([Alpha]/100))
InlineSetting3=Size | (Round(15*(#Size#/310)))
AntiAlias=1
DynamicVariables=1

[ArtistAlbumDisplay]
Meter=String
MeasureName=Artist
MeasureName2=Album
Text="%1 - %2"
X=18
Y=5R
W=(#Size#-24)
ClipString=2
InlineSetting=Face | #Font#
InlineSetting2=Color | 255,255,255,(229*([Alpha]/100))
InlineSetting3=Size | (Round(12*(#Size#/310)))
AntiAlias=1
DynamicVariables=1

[ControlBar]
Meter=Shape
Y=(([YPos]/100)*(#Size#*0.25))
Shape=Rectangle (Round(#Size#*0.05)),(Round(#Size#*0.75)),(Round(#Size#*0.9)),(Round(#Size#*0.21)),(Round(#Size#*0.025)),(Round(#Size#*0.025)) | StrokeWidth 0 | Extend Fill
Shape2=Rectangle (Round(#Size#*0.05)),(Round(#Size#*0.75)),(Round(#Size#*0.9)),(Round(#Size#*0.03)) | StrokeWidth 0 | Extend Fill
Fill=Fill Color 255,255,255

[ProgressBar]
Meter=Shape
Y=(([YPos]/100)*(#Size#*0.25))
Shape=Rectangle (Round(#Size#*0.05)),(Round(#Size#*0.75)),((Round(#Size#*0.9))*([Progress]/100)),4 | StrokeWidth 0 | Fill Color [P500]
Shape2=Ellipse ((Round(#Size#*0.05))+((Round(#Size#*0.9)*([Progress]/100)))),((Round(#Size#*0.75))+2),7 | StrokeWidth 0 | Fill Color [P500]
DynamicVariables=1

[PositionDisplay]
Meter=String
MeasureName=Position
X=((Round(#Size#*0.05))+10)
Y=((Round(#Size#*0.75))+8+(([YPos]/100)*(#Size#*0.25)))
W=(#Size#-24)
ClipString=2
InlineSetting=Face | #Font#
InlineSetting2=Color | #IconColour#,208
InlineSetting3=Size | (Round(9*(#Size#/310)))
AntiAlias=1
DynamicVariables=1

[DurationDisplay]
Meter=String
MeasureName=Duration
X=((Round(#Size#*0.95))-10)
Y=((Round(#Size#*0.75))+8+(([YPos]/100)*(#Size#*0.25)))
W=(#Size#-24)
StringAlign=Right
ClipString=2
InlineSetting=Face | #Font#
InlineSetting2=Color | #IconColour#,208
InlineSetting3=Size | (Round(9*(#Size#/310)))
AntiAlias=1
DynamicVariables=1

[PlayPauseFill]
Meter=Shape
Y=(([YPos]/100)*(#Size#*0.25))
Shape=Ellipse (Round(#Size#*0.5)),(Round(#Size#*0.855)+4),(Round(#Size#*0.05)) | StrokeWidth 0 | Fill Color 255,255,255

[PlayShape]
Meter=String
Text=play_circle_filled
InlineSetting=Face | Material Icons
InlineSetting2=Color | [P500]
InlineSetting3=Size | (Round(#Size#*0.135))
X=(Round(#Size#*0.5))
Y=(Round(#Size#*0.855)+4+(([YPos]/100)*(#Size#*0.25)))
StringAlign=CenterCenter
AntiAlias=1
LeftMouseUpAction=[!CommandMeasure Player PlayPause]

[PauseShape]
Meter=String
Text=pause_circle_filled
InlineSetting=Face | Material Icons
InlineSetting2=Color | [P500]
InlineSetting3=Size | (Round(#Size#*0.135))
X=(Round(#Size#*0.5))
Y=(Round(#Size#*0.855)+4+(([YPos]/100)*(#Size#*0.25)))
StringAlign=CenterCenter
AntiAlias=1
LeftMouseUpAction=[!CommandMeasure Player PlayPause]

[Previous]
Meter=String
Text=skip_previous
InlineSetting=Face | Material Icons
InlineSetting2=Color | #IconColour#
InlineSetting3=Size | (Round(#Size#*0.075))
X=(Round(#Size#*0.33))
Y=(Round(#Size#*0.855)+4+(([YPos]/100)*(#Size#*0.25)))
StringAlign=CenterCenter
AntiAlias=1
LeftMouseUpAction=[!CommandMeasure Player Previous]

[Next]
Meter=String
Text=skip_next
InlineSetting=Face | Material Icons
InlineSetting2=Color | #IconColour#
InlineSetting3=Size | (Round(#Size#*0.075))
X=(Round(#Size#*0.66))
Y=(Round(#Size#*0.855)+4+(([YPos]/100)*(#Size#*0.25)))
StringAlign=CenterCenter
AntiAlias=1
LeftMouseUpAction=[!CommandMeasure Player Next]

[SetRepeat]
Measure=String
String=#Player#
IfMatch=GPMDP|Web
IfMatchAction=[!CommandMeasure Player "Repeat"]
IfMatch2=Spotify
IfMatchAction2=[!Log "Spotify SetRepeat not supported at this time"]
IfMatch3=AIMP|Foobar|iTunes|MediaMonkey|MusicBee|Winamp|WMP
IfMatchAction3=[!CommandMeasure Player "SetRepeat -1"]
Disabled=1

[DisplayRepeat]
Meter=String
Text=repeat
InlineSetting=Face | Material Icons
InlineSetting2=Color | #IconColour#
InlineSetting3=Size | (Round(#Size#*0.06))
X=(Round(#Size#*0.2))
Y=(Round(#Size#*0.855)+4+(([YPos]/100)*(#Size#*0.25)))
StringAlign=CenterCenter
AntiAlias=1
LeftMouseUpAction=[!EnableMeasure SetRepeat][!UpdateMeasure SetRepeat][!DisableMeasure SetRepeat]

[SetShuffle]
Measure=String
String=#Player#
IfMatch=GPMDP|Web
IfMatchAction=[!CommandMeasure Player "Shuffle"]
IfMatch2=Spotify
IfMatchAction2=[!Log "Spotify SetShuffle not supported at this time"]
IfMatch3=AIMP|Foobar|iTunes|MediaMonkey|MusicBee|Winamp|WMP
IfMatchAction3=[!CommandMeasure Player "SetShuffle -1"]
Disabled=1

[DisplayShuffle]
Meter=String
Text=shuffle
InlineSetting=Face | Material Icons
InlineSetting2=Color | #IconColour#
InlineSetting3=Size | (Round(#Size#*0.06))
X=(Round(#Size#*0.8))
Y=(Round(#Size#*0.855)+4+(([YPos]/100)*(#Size#*0.25)))
StringAlign=CenterCenter
AntiAlias=1
LeftMouseUpAction=[!EnableMeasure SetShuffle][!UpdateMeasure SetShuffle][!DisableMeasure SetShuffle]

[Border]
Meter=Shape
Shape=Rectangle 0,0,#Size#,#Size# | StrokeWidth 0 | Extend Fill
Shape2=Rectangle 6,6,(#Size#-12),(#Size#-12)
Shape3=Combine Shape | Exclude Shape2
Fill=Fill Color [P500]